(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";e.s(["default",()=>p,"dollarFormat",()=>r,"priceToColor",()=>i,"runEggTests",()=>h]);var t,l=e.i(43476),a=e.i(71645);let s=[{id:1,name:"New York City, USA",lat:40.7128,lng:-74.006,priceUSD:3.89,date:"2025-08-15",source:"USDA (example)",url:"https://example.com/nyc-eggs"},{id:2,name:"San Francisco, USA",lat:37.7749,lng:-122.4194,priceUSD:4.59,date:"2025-08-10",source:"USDA (example)",url:"https://example.com/sf-eggs"},{id:3,name:"London, UK",lat:51.5072,lng:-.1276,priceUSD:3.15,date:"2025-08-09",source:"ONS (example)",url:"https://example.com/london-eggs"},{id:4,name:"Melbourne, AU",lat:-37.8136,lng:144.9631,priceUSD:4.02,date:"2025-08-18",source:"ABS (example)",url:"https://example.com/melbourne-eggs"},{id:5,name:"Dublin, IE",lat:53.3498,lng:-6.2603,priceUSD:3.45,date:"2025-08-05",source:"CSO (example)",url:"https://example.com/dublin-eggs"},{id:6,name:"Tokyo, JP",lat:35.6762,lng:139.6503,priceUSD:4.75,date:"2025-08-12",source:"MAFF (example)",url:"https://example.com/tokyo-eggs"},{id:7,name:"Paris, FR",lat:48.8566,lng:2.3522,priceUSD:3.6,date:"2025-08-14",source:"INSEE (example)",url:"https://example.com/paris-eggs"},{id:8,name:"Berlin, DE",lat:52.52,lng:13.405,priceUSD:3.25,date:"2025-08-17",source:"Destatis (example)",url:"https://example.com/berlin-eggs"},{id:9,name:"Toronto, CA",lat:43.65107,lng:-79.347015,priceUSD:4.1,date:"2025-08-11",source:"StatsCan (example)",url:"https://example.com/toronto-eggs"},{id:10,name:"Mexico City, MX",lat:19.4326,lng:-99.1332,priceUSD:2.95,date:"2025-08-07",source:"INEGI (example)",url:"https://example.com/mexico-eggs"},{id:11,name:"São Paulo, BR",lat:-23.5505,lng:-46.6333,priceUSD:2.8,date:"2025-08-16",source:"IBGE (example)",url:"https://example.com/saopaulo-eggs"},{id:12,name:"Cairo, EG",lat:30.0444,lng:31.2357,priceUSD:3.05,date:"2025-08-08",source:"CAPMAS (example)",url:"https://example.com/cairo-eggs"},{id:13,name:"Johannesburg, ZA",lat:-26.2041,lng:28.0473,priceUSD:3.7,date:"2025-08-13",source:"StatsSA (example)",url:"https://example.com/johannesburg-eggs"},{id:14,name:"Mumbai, IN",lat:19.076,lng:72.8777,priceUSD:2.65,date:"2025-08-06",source:"MOSPI (example)",url:"https://example.com/mumbai-eggs"},{id:15,name:"Seoul, KR",lat:37.5665,lng:126.978,priceUSD:4.35,date:"2025-08-19",source:"KOSIS (example)",url:"https://example.com/seoul-eggs"}];function r(e){return"$".concat(e.toFixed(2))}function i(e){let t=Math.max(2.5,Math.min(6,e));return"hsl(".concat(120*(1-(t-2.5)/3.5),", 100%, 50%)")}function n(e){let{children:t,className:a=""}=e;return(0,l.jsx)("div",{className:"rounded-2xl shadow-xl bg-white/85 ".concat(a),children:t})}function c(e){let{children:t,className:a=""}=e;return(0,l.jsx)("div",{className:"p-6 ".concat(a),children:t})}function o(e){let{children:t,onClick:a,className:s="",type:r="button",disabled:i}=e;return(0,l.jsx)("button",{type:r,onClick:a,disabled:i,className:"px-3 py-2 rounded-2xl border bg-white hover:bg-gray-50 shadow disabled:opacity-50 disabled:cursor-not-allowed ".concat(s),children:t})}function d(e){let{value:t,min:a,max:s,step:r,onChange:i}=e;return(0,l.jsx)("input",{type:"range",value:t,min:a,max:s,step:r,onChange:e=>i(Number(e.currentTarget.value)),className:"w-full"})}function m(e){let{maxPrice:t,setMaxPrice:a}=e;return(0,l.jsx)("div",{className:"z-[1000] fixed top-3 left-1/2 -translate-x-1/2 w-[min(980px,92vw)]",children:(0,l.jsx)(n,{className:"backdrop-blur border-0",children:(0,l.jsx)(c,{className:"p-4",children:(0,l.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"egg!"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 -mt-0.5",children:"Prices + public complaints (demo data)"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[(0,l.jsxs)("div",{className:"w-full md:w-72",children:[(0,l.jsxs)("label",{className:"text-xs text-gray-700 font-medium block mb-1",children:["Max price filter: ",r(t)]}),(0,l.jsx)(d,{value:t,min:2.5,max:6,step:.05,onChange:e=>a(e)})]}),(0,l.jsxs)(o,{onClick:()=>a(6),children:[(0,l.jsx)("span",{"aria-hidden":!0})," Reset"]})]})]})})})})}function x(e){let{picking:t,setDraftLatLng:l,leaflet:a}=e;return a.useMapEvents({click(e){t&&l(e.latlng)}}),null}function p(){let[t,d]=(0,a.useState)(6),[p,h]=(0,a.useState)(null),u=(0,a.useRef)(null);(0,a.useEffect)(()=>{let t=!0;return e.A(492).then(e=>{t&&h(e)}).catch(e=>console.warn("Failed to load react-leaflet dynamically:",e)),()=>{t=!1}},[!0]);let g=(0,a.useMemo)(()=>s.filter(e=>e.priceUSD<=t),[t]),f=(0,a.useMemo)(()=>g.length?g.reduce((e,t)=>e+t.priceUSD,0)/g.length:0,[g]),[j,N]=(0,a.useState)([{id:101,lat:40.7306,lng:-73.9352,text:"Almost $4.00 for a dozen?? Outrageous!",createdAt:"2025-08-01T10:30:00Z"}]),b="eggComplaints";(0,a.useEffect)(()=>{try{let e=window.localStorage.getItem(b);e&&N(JSON.parse(e))}catch(e){console.warn("Failed to load complaints:",e)}},[!0]),(0,a.useEffect)(()=>{try{window.localStorage.setItem(b,JSON.stringify(j))}catch(e){console.warn("Failed to save complaints:",e)}},[j,!0]);let[v,S]=(0,a.useState)(!1),[w,y]=(0,a.useState)(null),[C,k]=(0,a.useState)(""),[D,U]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=u.current;if(!e)return;let t=e=>{if(!v)return;let{lat:t,lng:l}=e.latlng||{};"number"==typeof t&&"number"==typeof l&&y({lat:t,lng:l})};return e.on("click",t),()=>{e.off("click",t)}},[v]);let A=()=>{if(!w||!C.trim())return;let e={id:Date.now(),lat:w.lat,lng:w.lng,text:C.trim(),createdAt:new Date().toISOString()};N(t=>[e,...t]),T()},F=e=>{U(e.id),k(e.text),y({lat:e.lat,lng:e.lng}),S(!1)},E=()=>{D&&(N(e=>e.map(e=>{var t,l;return e.id===D?{...e,text:C.trim(),lat:null!=(t=null==w?void 0:w.lat)?t:e.lat,lng:null!=(l=null==w?void 0:w.lng)?l:e.lng}:e})),T())},M=e=>{N(t=>t.filter(t=>t.id!==e)),D===e&&T()},T=()=>{U(null),k(""),y(null),S(!1)},P=e=>e?"".concat(e.lat.toFixed(4),", ").concat(e.lng.toFixed(4)):"—";return(0,l.jsxs)("div",{className:"h-screen w-screen relative",children:[(0,l.jsx)("div",{className:"absolute inset-0 -z-10 bg-[radial-gradient(ellipse_at_bottom,_var(--tw-gradient-stops))] from-blue-100 via-teal-100 to-white"}),(0,l.jsx)(m,{maxPrice:t,setMaxPrice:d}),(0,l.jsxs)("div",{className:"absolute top-28 right-3 z-[1000] space-y-3",children:[(0,l.jsx)(n,{className:"border-0",children:(0,l.jsx)(c,{className:"p-3",children:(0,l.jsxs)("div",{className:"text-xs text-gray-700",children:[(0,l.jsx)("div",{className:"font-semibold",children:"Stats"}),(0,l.jsxs)("div",{children:["Locations: ",g.length]}),(0,l.jsxs)("div",{children:["Average (shown): ",f?r(f):"—"]}),(0,l.jsxs)("div",{className:"mt-1",children:["Complaints: ",j.length]})]})})}),(0,l.jsx)(n,{className:"border-0",children:(0,l.jsxs)(c,{className:"p-3",children:[(0,l.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Complain about egg prices"}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("textarea",{value:C,onChange:e=>k(e.target.value),rows:3,placeholder:"eg. $5.50 a dozen?? highway robbery!",className:"w-full text-sm p-2 border rounded-lg"}),(0,l.jsxs)("div",{className:"text-[11px] text-gray-600",children:["Pick a location on the map: ",(0,l.jsx)("span",{className:"font-mono",children:P(w)})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(o,{onClick:()=>S(e=>!e),className:v?"ring-2 ring-purple-500":"",children:["📍 ",v?"Click the map…":"Pick location"]}),D?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o,{onClick:E,disabled:!C.trim()||!w,children:"💾 Save"}),(0,l.jsx)(o,{onClick:T,children:"✖ Cancel"})]}):(0,l.jsx)(o,{onClick:A,disabled:!C.trim()||!w,children:"➕ Add"})]})]})]})}),j.length>0&&(0,l.jsx)(n,{className:"border-0 max-h-56 overflow-auto",children:(0,l.jsxs)(c,{className:"p-3",children:[(0,l.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Recent complaints"}),(0,l.jsx)("ul",{className:"space-y-2",children:j.map(e=>(0,l.jsxs)("li",{className:"text-xs leading-snug",children:[(0,l.jsx)("div",{className:"font-medium line-clamp-2",children:e.text}),(0,l.jsxs)("div",{className:"text-[11px] text-gray-600",children:[new Date(e.createdAt).toLocaleString()," • ",e.lat.toFixed(3),",",e.lng.toFixed(3)]}),(0,l.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,l.jsx)(o,{onClick:()=>F(e),className:"px-2 py-1 text-xs",children:"✏️ Edit"}),(0,l.jsx)(o,{onClick:()=>M(e.id),className:"px-2 py-1 text-xs",children:"🗑 Delete"})]})]},e.id))})]})})]}),p?(0,l.jsxs)(p.MapContainer,{ref:u,center:[20,0],zoom:2,scrollWheelZoom:!0,className:"h-full w-full rounded-none",children:[(0,l.jsx)(p.TileLayer,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,l.jsx)(x,{picking:v,setDraftLatLng:y,leaflet:p}),g.map(e=>(0,l.jsxs)(p.CircleMarker,{center:[e.lat,e.lng],radius:10,pathOptions:{color:i(e.priceUSD),fillOpacity:.7,weight:2},children:[(0,l.jsx)(p.Tooltip,{direction:"top",offset:[0,-8],opacity:1,permanent:!1,children:(0,l.jsx)("div",{className:"text-xs font-semibold",children:e.name})}),(0,l.jsx)(p.Popup,{children:(0,l.jsxs)("div",{className:"w-56",children:[(0,l.jsx)("div",{className:"text-sm font-semibold",children:e.name}),(0,l.jsxs)("div",{className:"text-sm text-gray-700",children:["Price: ",r(e.priceUSD)," / dozen"]}),(0,l.jsxs)("div",{className:"text-[11px] text-gray-500",children:["As of: ",e.date]}),e.url&&(0,l.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-700 hover:underline mt-2",children:"Source ↗"})]})})]},e.id)),w&&(0,l.jsxs)(p.CircleMarker,{center:[w.lat,w.lng],radius:8,pathOptions:{color:"#7c3aed",fillOpacity:.5,weight:2,dashArray:"2,4"},children:[(0,l.jsx)(p.Tooltip,{direction:"top",offset:[0,-8],opacity:1,permanent:!1,children:(0,l.jsx)("div",{className:"text-[11px]",children:"draft"})}),(0,l.jsx)(p.Popup,{children:(0,l.jsxs)("div",{className:"w-56 text-xs",children:[(0,l.jsx)("div",{className:"font-semibold mb-1",children:"Draft complaint"}),(0,l.jsx)("div",{className:"text-gray-700 mb-1",children:C||(0,l.jsx)("span",{className:"italic text-gray-500",children:"No text yet"})}),(0,l.jsx)("div",{className:"text-[11px] text-gray-500 mb-2",children:P(w)}),(0,l.jsx)("div",{className:"flex gap-2",children:D?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o,{onClick:E,disabled:!C.trim(),children:"💾 Save"}),(0,l.jsx)(o,{onClick:T,children:"✖ Cancel"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o,{onClick:A,disabled:!C.trim(),children:"➕ Add"}),(0,l.jsx)(o,{onClick:T,children:"✖ Cancel"})]})})]})})]}),j.map(e=>(0,l.jsxs)(p.CircleMarker,{center:[e.lat,e.lng],radius:8,pathOptions:{color:"#7c3aed",fillOpacity:.7,weight:2},children:[(0,l.jsx)(p.Tooltip,{direction:"top",offset:[0,-8],opacity:1,permanent:!1,children:(0,l.jsx)("div",{className:"text-[11px]",children:"complaint"})}),(0,l.jsx)(p.Popup,{children:(0,l.jsxs)("div",{className:"w-56 text-xs",children:[(0,l.jsx)("div",{className:"font-semibold mb-1",children:"Complaint"}),(0,l.jsx)("div",{className:"text-gray-800 mb-1 whitespace-pre-wrap",children:e.text}),(0,l.jsxs)("div",{className:"text-[11px] text-gray-500 mb-2",children:[new Date(e.createdAt).toLocaleString()," • ",e.lat.toFixed(4),",",e.lng.toFixed(4)]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(o,{onClick:()=>F(e),children:"✏️ Edit"}),(0,l.jsx)(o,{onClick:()=>M(e.id),children:"🗑 Delete"})]})]})})]},e.id))]}):(0,l.jsx)("div",{className:"h-full w-full grid place-items-center text-sm text-gray-600",children:"Loading map…"}),(0,l.jsx)("footer",{className:"fixed bottom-3 left-1/2 -translate-x-1/2 w-[min(980px,92vw)]",children:(0,l.jsx)(n,{children:(0,l.jsx)(c,{className:"p-3 text-center text-xs text-gray-600",children:"Demo data for portfolio purposes. Replace with real sources (gov stats, market APIs, your scraper)."})})})]})}function h(){let e=[],t=(t,l)=>e.push({name:t,pass:!!l});t("dollarFormat formats to two decimals","$3.50"===r(3.5)),t("dollarFormat pads zeros","$3.00"===r(3));let l=e=>{let t=/hsl\((\d+(?:\.\d+)?)/.exec(e);return t?Number(t[1]):NaN},a=i(2.5),n=i(4.25),c=i(6),o=e=>l(i(e));t("priceToColor low closer to green (hue ~120)",l(a)>80),t("priceToColor mid between green and red",l(n)>20&&100>l(n)),t("priceToColor high closer to red (hue ~0)",40>l(c)),t("monotonic mapping 3.0 < 5.0",o(3)>o(5));let d=s.filter(e=>e.priceUSD<=4);return t("filtering by price <= 4 keeps some points",d.length>0),t("all filtered prices <= 4",d.every(e=>e.priceUSD<=4)),t("localStorage key exists after any mutation (cannot auto-check here)",!0),e}try{if(!0===window.__EGG_RUN_TESTS__||"string"==typeof(null==(t=window.location)?void 0:t.hash)&&window.location.hash.includes("run-tests")){let e=h(),t="".concat(e.filter(e=>e.pass).length,"/").concat(e.length," tests passed");console.log("EGG test results:",e,t)}}catch(e){console.warn("EGG tests failed to execute:",e)}},492,e=>{e.v(t=>Promise.all(["static/chunks/ff8104be31ec6ab8.js"].map(t=>e.l(t))).then(()=>t(3105)))}]);